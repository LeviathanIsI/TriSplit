<Window x:Class="TriSplit.Desktop.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:views="clr-namespace:TriSplit.Desktop.Views.Tabs"
        mc:Ignorable="d"
        Title="{Binding Title}"
        Height="900" Width="1600"
        WindowStartupLocation="CenterScreen"
        Background="{StaticResource BackgroundBrush}">

  <Grid>
    <Grid.RowDefinitions>
      <RowDefinition Height="*"/>
      <RowDefinition Height="Auto"/>
    </Grid.RowDefinitions>

    <!-- Main TabControl -->
    <TabControl Grid.Row="0"
                SelectedIndex="{Binding SelectedTabIndex}"
                Background="{StaticResource BackgroundBrush}"
                BorderThickness="0">

      <TabControl.Template>
        <ControlTemplate TargetType="TabControl">
          <Grid>
            <Grid.RowDefinitions>
              <RowDefinition Height="Auto"/>
              <RowDefinition Height="*"/>
            </Grid.RowDefinitions>

            <!-- Tab Headers -->
            <Border Grid.Row="0"
                    Background="{StaticResource SurfaceBrush}"
                    BorderBrush="{StaticResource BorderBrush}"
                    BorderThickness="0,0,0,1">
              <TabPanel IsItemsHost="True"
                        Background="Transparent"
                        Margin="10,0"/>
            </Border>

            <!-- Tab Content -->
            <Border Grid.Row="1"
                    Background="{StaticResource BackgroundBrush}">
              <ContentPresenter x:Name="PART_SelectedContentHost"
                                ContentSource="SelectedContent"/>
            </Border>
          </Grid>
        </ControlTemplate>
      </TabControl.Template>

      <!-- Profiles Tab -->
      <TabItem Header="{Binding ProfilesTabHeader}">
        <views:ProfilesView DataContext="{Binding ProfilesViewModel}"/>
      </TabItem>

      <!-- Test Tab -->
      <TabItem Header="TEST">
        <views:TestView DataContext="{Binding TestViewModel}"/>
      </TabItem>

      <!-- Processing Tab -->
      <TabItem Header="PROCESSING">
        <views:ProcessingView DataContext="{Binding ProcessingViewModel}"/>
      </TabItem>
    </TabControl>

    <!-- Footer -->
    <Border Grid.Row="1"
            Background="{StaticResource SurfaceBrush}"
            BorderBrush="{StaticResource BorderBrush}"
            BorderThickness="0,1,0,0" Padding="12,4">
      <Grid>
        <Grid.ColumnDefinitions>
          <ColumnDefinition Width="Auto"/>
          <ColumnDefinition Width="*"/>
          <ColumnDefinition Width="Auto"/>
        </Grid.ColumnDefinitions>

        <StackPanel Grid.Column="0" Orientation="Horizontal" Margin="12,0" VerticalAlignment="Center">
          <TextBlock Text="TriSplit"
                     FontSize="22"
                     FontWeight="Bold"
                     Foreground="{StaticResource AccentBrush}"
                     VerticalAlignment="Center"/>
          <TextBlock Text="Data Mapping &amp; HubSpot Integration"
                     FontSize="12"
                     Foreground="{StaticResource SecondaryTextBrush}"
                     VerticalAlignment="Center"
                     Margin="12,0,0,0"/>
          <TextBlock Text="v 3.0.0"
                     FontSize="11"
                     Foreground="{StaticResource SecondaryTextBrush}"
                     VerticalAlignment="Center"
                     Margin="12,0,0,0"/>
        </StackPanel>

        <StackPanel Grid.Column="2" Orientation="Horizontal" Margin="12,0" VerticalAlignment="Center">
          <TextBlock Text="Data Profile:"
                     Foreground="{StaticResource SecondaryTextBrush}"
                     VerticalAlignment="Center"
                     Margin="0,0,6,0"/>
          <TextBlock Text="{Binding ActiveProfileName}"
                     Foreground="{StaticResource AccentBrush}"
                     FontWeight="Medium"
                     VerticalAlignment="Center"/>
        </StackPanel>
      </Grid>
    </Border>
  </Grid>
</Window>
