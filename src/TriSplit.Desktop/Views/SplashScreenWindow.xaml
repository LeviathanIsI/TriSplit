<Window x:Class="TriSplit.Desktop.Views.SplashScreenWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        WindowStyle="None"
        AllowsTransparency="True"
        Background="Transparent"
        ResizeMode="NoResize"
        ShowInTaskbar="False"
        SizeToContent="WidthAndHeight"
        Topmost="True"
        WindowStartupLocation="CenterScreen"
        Loaded="OnSplashLoaded">
  <Window.Resources>
    <CubicEase x:Key="SplashEase" EasingMode="EaseOut"/>
    <QuinticEase x:Key="TextEase" EasingMode="EaseInOut"/>
    <ExponentialEase x:Key="SparkEase" EasingMode="EaseOut" Exponent="4"/>

    <Storyboard x:Key="SplashStoryboard">
      <!-- Fade in the whole grid -->
      <DoubleAnimation Storyboard.TargetName="RootGrid"
                       Storyboard.TargetProperty="Opacity"
                       From="0"
                       To="1"
                       Duration="0:0:0.3"/>

      <!-- Amber box fade and scale -->
      <DoubleAnimation Storyboard.TargetName="LogoBorder"
                       Storyboard.TargetProperty="Opacity"
                       From="0"
                       To="1"
                       Duration="0:0:0.4"/>
      <DoubleAnimation Storyboard.TargetName="LogoScale"
                       Storyboard.TargetProperty="ScaleX"
                       From="0.85"
                       To="1"
                       Duration="0:0:0.4"
                       EasingFunction="{StaticResource SplashEase}"/>
      <DoubleAnimation Storyboard.TargetName="LogoScale"
                       Storyboard.TargetProperty="ScaleY"
                       From="0.85"
                       To="1"
                       Duration="0:0:0.4"
                       EasingFunction="{StaticResource SplashEase}"/>

      <!-- Text reveal animation with mask -->
      <DoubleAnimation Storyboard.TargetName="TextRevealTransform"
                       Storyboard.TargetProperty="X"
                       BeginTime="0:0:0.4"
                       From="-420"
                       To="0"
                       Duration="0:0:1.6"
                       EasingFunction="{StaticResource TextEase}"/>

      <!-- Text glow fade in -->
      <DoubleAnimation Storyboard.TargetName="MainText"
                       Storyboard.TargetProperty="Opacity"
                       BeginTime="0:0:0.4"
                       From="0"
                       To="1"
                       Duration="0:0:0.6"/>

      <!-- Whispy line animation -->
      <DoubleAnimation Storyboard.TargetName="WhispyLine"
                       Storyboard.TargetProperty="StrokeDashOffset"
                       BeginTime="0:0:0.45"
                       From="300"
                       To="0"
                       Duration="0:0:1.5"
                       EasingFunction="{StaticResource TextEase}"/>
      <DoubleAnimation Storyboard.TargetName="WhispyLine"
                       Storyboard.TargetProperty="Opacity"
                       BeginTime="0:0:0.45"
                       From="0"
                       To="0.4"
                       Duration="0:0:0.4"/>
      <DoubleAnimation Storyboard.TargetName="WhispyLine"
                       Storyboard.TargetProperty="Opacity"
                       BeginTime="0:0:1.8"
                       From="0.4"
                       To="0"
                       Duration="0:0:0.4"/>

      <!-- Glow pulse at completion -->
      <DoubleAnimation Storyboard.TargetName="TextGlow"
                       Storyboard.TargetProperty="Opacity"
                       BeginTime="0:0:2.0"
                       From="0.5"
                       To="1"
                       Duration="0:0:0.3"
                       AutoReverse="True"/>
      <DoubleAnimation Storyboard.TargetName="LogoBorder"
                       Storyboard.TargetProperty="(UIElement.Effect).Opacity"
                       BeginTime="0:0:2.0"
                       From="0.25"
                       To="0.6"
                       Duration="0:0:0.3"
                       AutoReverse="True"/>

      <!-- Floating spark particles -->
      <DoubleAnimation Storyboard.TargetName="Spark1"
                       Storyboard.TargetProperty="Opacity"
                       BeginTime="0:0:1.9"
                       From="0"
                       To="0.9"
                       Duration="0:0:0.2"/>
      <DoubleAnimation Storyboard.TargetName="Spark1"
                       Storyboard.TargetProperty="Opacity"
                       BeginTime="0:0:2.1"
                       From="0.9"
                       To="0"
                       Duration="0:0:0.6"/>
      <DoubleAnimation Storyboard.TargetName="Spark1Transform"
                       Storyboard.TargetProperty="Y"
                       BeginTime="0:0:1.9"
                       From="0"
                       To="-40"
                       Duration="0:0:0.8"
                       EasingFunction="{StaticResource SparkEase}"/>

      <DoubleAnimation Storyboard.TargetName="Spark2"
                       Storyboard.TargetProperty="Opacity"
                       BeginTime="0:0:2.05"
                       From="0"
                       To="0.8"
                       Duration="0:0:0.2"/>
      <DoubleAnimation Storyboard.TargetName="Spark2"
                       Storyboard.TargetProperty="Opacity"
                       BeginTime="0:0:2.25"
                       From="0.8"
                       To="0"
                       Duration="0:0:0.65"/>
      <DoubleAnimation Storyboard.TargetName="Spark2Transform"
                       Storyboard.TargetProperty="Y"
                       BeginTime="0:0:2.05"
                       From="0"
                       To="-45"
                       Duration="0:0:0.85"
                       EasingFunction="{StaticResource SparkEase}"/>
      <DoubleAnimation Storyboard.TargetName="Spark2Transform"
                       Storyboard.TargetProperty="X"
                       BeginTime="0:0:2.05"
                       From="0"
                       To="15"
                       Duration="0:0:0.85"/>

      <DoubleAnimation Storyboard.TargetName="Spark3"
                       Storyboard.TargetProperty="Opacity"
                       BeginTime="0:0:2.15"
                       From="0"
                       To="0.7"
                       Duration="0:0:0.2"/>
      <DoubleAnimation Storyboard.TargetName="Spark3"
                       Storyboard.TargetProperty="Opacity"
                       BeginTime="0:0:2.35"
                       From="0.7"
                       To="0"
                       Duration="0:0:0.7"/>
      <DoubleAnimation Storyboard.TargetName="Spark3Transform"
                       Storyboard.TargetProperty="Y"
                       BeginTime="0:0:2.15"
                       From="0"
                       To="-42"
                       Duration="0:0:0.9"
                       EasingFunction="{StaticResource SparkEase}"/>
      <DoubleAnimation Storyboard.TargetName="Spark3Transform"
                       Storyboard.TargetProperty="X"
                       BeginTime="0:0:2.15"
                       From="0"
                       To="-10"
                       Duration="0:0:0.9"/>

      <!-- Fade out everything -->
      <DoubleAnimation Storyboard.TargetName="RootGrid"
                       Storyboard.TargetProperty="Opacity"
                       BeginTime="0:0:2.7"
                       From="1"
                       To="0"
                       Duration="0:0:0.35"
                       FillBehavior="HoldEnd"/>
    </Storyboard>
  </Window.Resources>

  <Grid x:Name="RootGrid" Background="#FF1A1A1A" Opacity="0" Margin="50">
    <Border x:Name="LogoBorder"
            Width="510"
            Height="210"
            CornerRadius="16"
            BorderBrush="#20FFFFFF"
            BorderThickness="0.5"
            Opacity="0">
      <Border.Resources>
        <LinearGradientBrush x:Key="AmberBoxBackground" StartPoint="0,0" EndPoint="1,1">
          <GradientStop Color="#FFF59E0B" Offset="0"/>
          <GradientStop Color="#FFFBBF24" Offset="0.5"/>
          <GradientStop Color="#FFD97706" Offset="1"/>
        </LinearGradientBrush>
      </Border.Resources>
      <Border.Background>
        <StaticResource ResourceKey="AmberBoxBackground"/>
      </Border.Background>
      <Border.RenderTransform>
        <ScaleTransform x:Name="LogoScale" ScaleX="0.85" ScaleY="0.85"/>
      </Border.RenderTransform>
      <Border.RenderTransformOrigin>0.5,0.5</Border.RenderTransformOrigin>
      <Border.Effect>
        <DropShadowEffect Color="#FFF59E0B" BlurRadius="30" ShadowDepth="0" Opacity="0.25"/>
      </Border.Effect>

      <Grid ClipToBounds="True">
        <!-- Main content container -->
        <Grid Width="420" Height="150" HorizontalAlignment="Center" VerticalAlignment="Center">

          <!-- Whispy decorative line -->
          <Path x:Name="WhispyLine"
                Stroke="#50FFFFFF"
                StrokeThickness="2.5"
                StrokeStartLineCap="Round"
                StrokeEndLineCap="Round"
                StrokeDashArray="450 450"
                StrokeDashOffset="450"
                Opacity="0"
                Data="M 30,105 Q 120,97 210,105 T 390,105">
            <Path.Effect>
              <BlurEffect Radius="5"/>
            </Path.Effect>
          </Path>

          <!-- Text with gradient and glow -->
          <Grid>
            <Grid.Clip>
              <RectangleGeometry Rect="0,0,420,150">
                <RectangleGeometry.Transform>
                  <TranslateTransform x:Name="TextRevealTransform" X="-420"/>
                </RectangleGeometry.Transform>
              </RectangleGeometry>
            </Grid.Clip>

            <!-- Glow effect text (behind) -->
            <TextBlock x:Name="TextGlow"
                       Text="TriSplit"
                       FontFamily="Segoe UI Light"
                       FontSize="72"
                       FontWeight="Thin"
                       Foreground="#FFFEF3C7"
                       HorizontalAlignment="Center"
                       VerticalAlignment="Center"
                       Opacity="0.5">
              <TextBlock.Effect>
                <BlurEffect Radius="12"/>
              </TextBlock.Effect>
            </TextBlock>

            <!-- Main text -->
            <TextBlock x:Name="MainText"
                       Text="TriSplit"
                       FontFamily="Segoe UI Light"
                       FontSize="72"
                       FontWeight="Thin"
                       HorizontalAlignment="Center"
                       VerticalAlignment="Center"
                       Opacity="0">
              <TextBlock.Foreground>
                <LinearGradientBrush StartPoint="0,0" EndPoint="0,1">
                  <GradientStop Color="#FFFFF0" Offset="0"/>
                  <GradientStop Color="#FFFEF3C7" Offset="0.5"/>
                  <GradientStop Color="#FFFFE8B4" Offset="1"/>
                </LinearGradientBrush>
              </TextBlock.Foreground>
            </TextBlock>
          </Grid>

          <!-- Particle effects layer -->
          <Canvas x:Name="ParticleLayer">
            <Ellipse x:Name="Spark1" Width="4" Height="4" Fill="#FFFFF0" Opacity="0" 
                     Canvas.Left="138" Canvas.Top="72">
              <Ellipse.RenderTransform>
                <TranslateTransform x:Name="Spark1Transform"/>
              </Ellipse.RenderTransform>
              <Ellipse.Effect>
                <BlurEffect Radius="3"/>
              </Ellipse.Effect>
            </Ellipse>

            <Ellipse x:Name="Spark2" Width="3" Height="3" Fill="#FFFEF3C7" Opacity="0" 
                     Canvas.Left="200" Canvas.Top="68">
              <Ellipse.RenderTransform>
                <TranslateTransform x:Name="Spark2Transform"/>
              </Ellipse.RenderTransform>
              <Ellipse.Effect>
                <BlurEffect Radius="2.5"/>
              </Ellipse.Effect>
            </Ellipse>

            <Ellipse x:Name="Spark3" Width="3.5" Height="3.5" Fill="#FFFFE8B4" Opacity="0" 
                     Canvas.Left="80" Canvas.Top="70">
              <Ellipse.RenderTransform>
                <TranslateTransform x:Name="Spark3Transform"/>
              </Ellipse.RenderTransform>
              <Ellipse.Effect>
                <BlurEffect Radius="3"/>
              </Ellipse.Effect>
            </Ellipse>
          </Canvas>
        </Grid>
      </Grid>
    </Border>
  </Grid>
</Window>
