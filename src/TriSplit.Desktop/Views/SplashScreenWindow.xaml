<Window x:Class="TriSplit.Desktop.Views.SplashScreenWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        WindowStyle="None"
        AllowsTransparency="True"
        Background="Transparent"
        ResizeMode="NoResize"
        ShowInTaskbar="False"
        SizeToContent="WidthAndHeight"
        Topmost="True"
        WindowStartupLocation="CenterScreen"
        Loaded="OnSplashLoaded">
  <Window.Resources>
    <CubicEase x:Key="SplashEase" EasingMode="EaseOut"/>
    <QuinticEase x:Key="StrokeEase" EasingMode="EaseInOut"/>
    <ExponentialEase x:Key="SparkEase" EasingMode="EaseOut" Exponent="4"/>

    <Storyboard x:Key="SplashStoryboard">
      <!-- Fade in the whole grid -->
      <DoubleAnimation Storyboard.TargetName="RootGrid"
                       Storyboard.TargetProperty="Opacity"
                       From="0"
                       To="1"
                       Duration="0:0:0.3"/>

      <!-- Amber box fade and scale -->
      <DoubleAnimation Storyboard.TargetName="LogoBorder"
                       Storyboard.TargetProperty="Opacity"
                       From="0"
                       To="1"
                       Duration="0:0:0.4"/>
      <DoubleAnimation Storyboard.TargetName="LogoScale"
                       Storyboard.TargetProperty="ScaleX"
                       From="0.88"
                       To="1"
                       Duration="0:0:0.4"
                       EasingFunction="{StaticResource SplashEase}"/>
      <DoubleAnimation Storyboard.TargetName="LogoScale"
                       Storyboard.TargetProperty="ScaleY"
                       From="0.88"
                       To="1"
                       Duration="0:0:0.4"
                       EasingFunction="{StaticResource SplashEase}"/>

      <!-- "TriSplit" text drawing animation -->
      <DoubleAnimation Storyboard.TargetName="TriSplitPath"
                       Storyboard.TargetProperty="StrokeDashOffset"
                       BeginTime="0:0:0.35"
                       From="800"
                       To="0"
                       Duration="0:0:1.8"
                       EasingFunction="{StaticResource StrokeEase}"/>
      <DoubleAnimation Storyboard.TargetName="TriSplitPath"
                       Storyboard.TargetProperty="Opacity"
                       BeginTime="0:0:0.35"
                       From="0"
                       To="1"
                       Duration="0:0:0.3"/>

      <!-- Whispy trail effect -->
      <DoubleAnimation Storyboard.TargetName="WhispyTrail"
                       Storyboard.TargetProperty="Opacity"
                       BeginTime="0:0:0.4"
                       From="0"
                       To="0.6"
                       Duration="0:0:1.4"/>
      <DoubleAnimation Storyboard.TargetName="WhispyTrail"
                       Storyboard.TargetProperty="StrokeDashOffset"
                       BeginTime="0:0:0.4"
                       From="800"
                       To="0"
                       Duration="0:0:1.7"
                       EasingFunction="{StaticResource StrokeEase}"/>

      <!-- Glow pulse at completion -->
      <DoubleAnimation Storyboard.TargetName="LogoBorder"
                       Storyboard.TargetProperty="(UIElement.Effect).Opacity"
                       BeginTime="0:0:2.1"
                       From="0.25"
                       To="0.65"
                       Duration="0:0:0.4"
                       AutoReverse="True"/>

      <!-- Floating spark particles -->
      <DoubleAnimation Storyboard.TargetName="Spark1"
                       Storyboard.TargetProperty="Opacity"
                       BeginTime="0:0:2.0"
                       From="0"
                       To="0.85"
                       Duration="0:0:0.2"/>
      <DoubleAnimation Storyboard.TargetName="Spark1"
                       Storyboard.TargetProperty="Opacity"
                       BeginTime="0:0:2.2"
                       From="0.85"
                       To="0"
                       Duration="0:0:0.5"/>
      <DoubleAnimation Storyboard.TargetName="Spark1Transform"
                       Storyboard.TargetProperty="Y"
                       BeginTime="0:0:2.0"
                       From="0"
                       To="-35"
                       Duration="0:0:0.7"
                       EasingFunction="{StaticResource SparkEase}"/>

      <DoubleAnimation Storyboard.TargetName="Spark2"
                       Storyboard.TargetProperty="Opacity"
                       BeginTime="0:0:2.15"
                       From="0"
                       To="0.75"
                       Duration="0:0:0.2"/>
      <DoubleAnimation Storyboard.TargetName="Spark2"
                       Storyboard.TargetProperty="Opacity"
                       BeginTime="0:0:2.35"
                       From="0.75"
                       To="0"
                       Duration="0:0:0.55"/>
      <DoubleAnimation Storyboard.TargetName="Spark2Transform"
                       Storyboard.TargetProperty="Y"
                       BeginTime="0:0:2.15"
                       From="0"
                       To="-40"
                       Duration="0:0:0.75"
                       EasingFunction="{StaticResource SparkEase}"/>
      <DoubleAnimation Storyboard.TargetName="Spark2Transform"
                       Storyboard.TargetProperty="X"
                       BeginTime="0:0:2.15"
                       From="0"
                       To="12"
                       Duration="0:0:0.75"/>

      <DoubleAnimation Storyboard.TargetName="Spark3"
                       Storyboard.TargetProperty="Opacity"
                       BeginTime="0:0:2.25"
                       From="0"
                       To="0.65"
                       Duration="0:0:0.2"/>
      <DoubleAnimation Storyboard.TargetName="Spark3"
                       Storyboard.TargetProperty="Opacity"
                       BeginTime="0:0:2.45"
                       From="0.65"
                       To="0"
                       Duration="0:0:0.6"/>
      <DoubleAnimation Storyboard.TargetName="Spark3Transform"
                       Storyboard.TargetProperty="Y"
                       BeginTime="0:0:2.25"
                       From="0"
                       To="-38"
                       Duration="0:0:0.8"
                       EasingFunction="{StaticResource SparkEase}"/>
      <DoubleAnimation Storyboard.TargetName="Spark3Transform"
                       Storyboard.TargetProperty="X"
                       BeginTime="0:0:2.25"
                       From="0"
                       To="-8"
                       Duration="0:0:0.8"/>

      <!-- Fade out everything -->
      <DoubleAnimation Storyboard.TargetName="RootGrid"
                       Storyboard.TargetProperty="Opacity"
                       BeginTime="0:0:2.8"
                       From="1"
                       To="0"
                       Duration="0:0:0.35"
                       FillBehavior="HoldEnd"/>
    </Storyboard>
  </Window.Resources>

  <Grid x:Name="RootGrid" Background="#FF1A1A1A" Opacity="0" Margin="50">
    <Border x:Name="LogoBorder"
            Width="340"
            Height="140"
            CornerRadius="12"
            BorderBrush="#30FFFFFF"
            BorderThickness="0.5"
            Opacity="0">
      <Border.Resources>
        <LinearGradientBrush x:Key="AmberBoxBackground" StartPoint="0,0" EndPoint="1,1">
          <GradientStop Color="#FFF59E0B" Offset="0"/>
          <GradientStop Color="#FFFBBF24" Offset="0.5"/>
          <GradientStop Color="#FFD97706" Offset="1"/>
        </LinearGradientBrush>
      </Border.Resources>
      <Border.Background>
        <StaticResource ResourceKey="AmberBoxBackground"/>
      </Border.Background>
      <Border.RenderTransform>
        <ScaleTransform x:Name="LogoScale" ScaleX="0.88" ScaleY="0.88"/>
      </Border.RenderTransform>
      <Border.RenderTransformOrigin>0.5,0.5</Border.RenderTransformOrigin>
      <Border.Effect>
        <DropShadowEffect Color="#FFF59E0B" BlurRadius="28" ShadowDepth="0" Opacity="0.25"/>
      </Border.Effect>

      <Grid>
        <Canvas Width="280" Height="100" HorizontalAlignment="Center" VerticalAlignment="Center">

          <!-- Whispy trail effect (renders behind main text) -->
          <Path x:Name="WhispyTrail"
                Stroke="#30FFFFFF"
                StrokeThickness="8"
                StrokeStartLineCap="Round"
                StrokeEndLineCap="Round"
                StrokeDashArray="800 800"
                StrokeDashOffset="800"
                Opacity="0"
                Data="M 10 20 L 50 20 L 50 30 L 35 30 L 35 70 L 25 70 L 25 30 L 10 30 Z M 60 45 Q 60 40 65 40 Q 72 40 72 48 L 72 70 L 62 70 L 62 50 Z M 82 45 L 82 70 L 92 70 L 92 45 Z M 87 35 Q 87 32 90 32 Q 93 32 93 35 Q 93 38 90 38 Q 87 38 87 35 Z M 115 30 Q 105 30 105 40 Q 105 50 120 50 Q 135 50 135 60 Q 135 70 120 70 Q 105 70 105 60 L 115 60 Q 115 65 120 65 Q 125 65 125 60 Q 125 55 110 55 Q 95 55 95 40 Q 95 25 115 25 Q 135 25 135 35 L 125 35 Q 125 30 115 30 Z M 150 45 L 150 80 Q 150 90 160 90 Q 170 90 170 80 L 170 65 Q 170 60 165 60 Q 160 60 160 65 L 160 80 L 150 80 M 150 45 Q 150 35 160 35 Q 170 35 170 45 Q 170 55 160 55 Q 150 55 150 45 Z M 185 35 L 185 90 L 195 90 L 195 35 Z M 210 45 L 210 70 L 220 70 L 220 45 Z M 215 35 Q 215 32 218 32 Q 221 32 221 35 Q 221 38 218 38 Q 215 38 215 35 Z M 235 35 L 245 35 L 245 55 L 255 55 L 255 65 L 245 65 L 245 90 L 235 90 L 235 65 L 225 65 L 225 55 L 235 55 Z">
            <Path.Effect>
              <BlurEffect Radius="12"/>
            </Path.Effect>
          </Path>

          <!-- Main "TriSplit" text path -->
          <Path x:Name="TriSplitPath"
                Stroke="#FFFEF3C7"
                StrokeThickness="3"
                StrokeStartLineCap="Round"
                StrokeEndLineCap="Round"
                StrokeDashArray="800 800"
                StrokeDashOffset="800"
                StrokeLineJoin="Round"
                Opacity="0"
                Data="M 10 20 L 50 20 L 50 30 L 35 30 L 35 70 L 25 70 L 25 30 L 10 30 Z M 60 45 Q 60 40 65 40 Q 72 40 72 48 L 72 70 L 62 70 L 62 50 Z M 82 45 L 82 70 L 92 70 L 92 45 Z M 87 35 Q 87 32 90 32 Q 93 32 93 35 Q 93 38 90 38 Q 87 38 87 35 Z M 115 30 Q 105 30 105 40 Q 105 50 120 50 Q 135 50 135 60 Q 135 70 120 70 Q 105 70 105 60 L 115 60 Q 115 65 120 65 Q 125 65 125 60 Q 125 55 110 55 Q 95 55 95 40 Q 95 25 115 25 Q 135 25 135 35 L 125 35 Q 125 30 115 30 Z M 150 45 L 150 80 Q 150 90 160 90 Q 170 90 170 80 L 170 65 Q 170 60 165 60 Q 160 60 160 65 L 160 80 L 150 80 M 150 45 Q 150 35 160 35 Q 170 35 170 45 Q 170 55 160 55 Q 150 55 150 45 Z M 185 35 L 185 90 L 195 90 L 195 35 Z M 210 45 L 210 70 L 220 70 L 220 45 Z M 215 35 Q 215 32 218 32 Q 221 32 221 35 Q 221 38 218 38 Q 215 38 215 35 Z M 235 35 L 245 35 L 245 55 L 255 55 L 255 65 L 245 65 L 245 90 L 235 90 L 235 65 L 225 65 L 225 55 L 235 55 Z"/>

          <!-- Particle effects layer -->
          <Canvas x:Name="ParticleLayer">
            <Ellipse x:Name="Spark1" Width="4" Height="4" Fill="#FFFFF0" Opacity="0" 
                     Canvas.Left="138" Canvas.Top="65">
              <Ellipse.RenderTransform>
                <TranslateTransform x:Name="Spark1Transform"/>
              </Ellipse.RenderTransform>
              <Ellipse.Effect>
                <BlurEffect Radius="3"/>
              </Ellipse.Effect>
            </Ellipse>

            <Ellipse x:Name="Spark2" Width="3" Height="3" Fill="#FFFEF3C7" Opacity="0" 
                     Canvas.Left="180" Canvas.Top="60">
              <Ellipse.RenderTransform>
                <TranslateTransform x:Name="Spark2Transform"/>
              </Ellipse.RenderTransform>
              <Ellipse.Effect>
                <BlurEffect Radius="2.5"/>
              </Ellipse.Effect>
            </Ellipse>

            <Ellipse x:Name="Spark3" Width="3.5" Height="3.5" Fill="#FFFFE8B4" Opacity="0" 
                     Canvas.Left="220" Canvas.Top="58">
              <Ellipse.RenderTransform>
                <TranslateTransform x:Name="Spark3Transform"/>
              </Ellipse.RenderTransform>
              <Ellipse.Effect>
                <BlurEffect Radius="3"/>
              </Ellipse.Effect>
            </Ellipse>
          </Canvas>
        </Canvas>
      </Grid>
    </Border>
  </Grid>
</Window>
